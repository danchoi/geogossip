<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <style>
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
        </style>
        <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="css/main.css">

        <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.css" />
        <!--[if lte IE 8]>
            <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.ie.css" />
        <![endif]-->

        <!--[if lt IE 9]>
            <script src="js/vendor/html5-3.6-respond-1.1.0.min.js"></script>
        <![endif]-->
        <script src="http://cdn.leafletjs.com/leaflet-0.5/leaflet.js"></script>

        <script text='text/javascript' src="js/angular.min.js"></script>
        <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

        <script src="js/chatui.js"></script>

    </head>
    <body ng-app>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="#">Geogossip</a>
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                            <li class="active"><a href="#">Home</a></li>
                            <li><a href="#about">About</a></li>
                            <li><a href="#contact">Contact</a></li>
                            <li><a href="https://github.com/organiker/geogossip">GitHub</a></li>
                            <li><a href="https://github.com/CodeRaising/coderaising/wiki/Projects">CodeRaising Projects</a></li>
                            <li><a href="http://docs.angularjs.org/api/">AngularJS Docs</a></li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>

        <div class="container">

          <!-- angular d3.js examples -->
          <div class="row" ng-controller="ChatUICtrl">
              <div class="span8">
                <div id="map"></div>
                <div class="topics_list">
                  <button class="add_topic">Add a new topic</button>

                  <!-- topics go here -->
                  <div ng-click="selectChannel($index)" ng-repeat="channel in channels" class="topic" ng-class="channelClass($index)">{{channel.topic}}</div>
                </div>
                <form name="newTopicForm" ng-submit="createTopic()">
                  <input type="text" ng-model="newTopicName" class="topic_input" placeholder="Add a new topic here"/>
                  <input type="submit"/>
                </form>
              </div>
              <div class="span4">
                  <h2 ng-hide="topicEditMode">{{ activeChannel.topic || "Chat"}}</h2>
                  <form ng-submit="topicEditMode = false" ng-show="topicEditMode">
                    <input type="text" ng-model="activeChannel.topic">
                    <input type="submit">
                  </form>
                  <button ng-click="topicEditMode = true" ng-hide="topicEditMode">
                    change topic name
                  </button>
                  <!-- chat goes here -->
                  <div class="chat_container">
                    <div class="chat_message" ng-repeat="message in activeChannel.messages">
                      <span class="username">{{message.name}}</span> says: {{message.message}}
                    </div>
                  </div>
                  <form ng-submit="addMessage()">
                    <input ng-model="newMessage" type="text" class="chat_input"/>
                    <input type="submit"/>
                  </form>
              </div>
          </div>



            <div id="mysvg"></div>
            <script>
              var svg2 = d3.select("#mysvg")
                          .append("svg")
                          .attr("width", 500)
                          .attr("height", 200);

              var data2 = [[10, 20], [20, 30], [5, 30]];

              svg2.selectAll("circle").data(data2).enter()
                  .append("circle")
                  .attr("cx", function(d) {return (2*d[0])})
                  .attr("cy", function(d) {return (2*d[1])})
                  .attr("r", function(d) {return 0.5 * d[0]})
                  .style("fill", function(d, i) {return d3.rgb(70 * i, 90 * d[0], 2*d[0])})
                  .transition()
                  .duration(2500)
                  .attr("cx", function(d) {return (Math.pow(d[0],2))})
                  .attr("cy", function(d) {return (5*d[1])})
                  .attr("r", function(d) {return (2*d[0])})
                  .style("fill", function(d,i) {return d3.rgb(120 * d[0], 100 * i, i*d[0])})
                  // .append("text")
                  // .text("hello")
                  // .attr("x", function(d) {return d})
                  // .attr("y", function(d) {return d});
            </script>

            <div id="mysvg2"></div>
            <script>
              var svg3 = d3.select("#mysvg2")
                            .append("svg");

              var data3 = [ {x:100, y:50, name: "Alex"},
                            {x:200, y:50, name: "Betty"},
                            {x:300, y:50, name: "Caleb"}
                           ];        

              var items = svg3.selectAll(".item")
                              .data(data3)
                              .enter()
                              .append("g")
                              .attr("class", "item")
                              .attr("transform", function(d,i) {return "translate("+ d.x + ", " + d.y + ")"});

              items.data(data3)
                  .append("circle")
                  .attr("r", function(d) {return 30})
                  .style("fill", function(d, i) {return d3.rgb(70 * i, 80 * i, 80 * i)});

              items.append("text")
                  .text(function(d,i) {return d.name})
                  .style("stroke", "white")
                  .attr("text-anchor", "middle")
                  .attr("y", 4)
                  .attr("transform", "translate(0,0)rotate(45)");
            </script>

            <svg width="200" height="200">
                <circle cx="25" cy="30" r="23" style="fill:red"/>
                <g x="70" y="70"/>
                    <text x="30" y="20">Hello</text>
                    <rect x="50" y="30" width="10" height="10"/>
                </g>
            </svg>

            <!-- angular d3.js examples -->
            <div class="row">
                <div class="span8">
                    <div id="d3-1"></div>



                    <p>These bind content and placement of the user names. Sliders won't appear in Firefox, but work in Chrome and Safari.</p>

                    <table class="table table-bordered">
                        <thead>
                            <th>name</th>
                            <th>x</th>
                            <th>y</th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="user in users">
                                <td>
                                    <input type='text' ng-model='user.name' />
                                </td>
                                <td>
                                    <input type='text' ng-model='user.x' />
                                    <input type='range' ng-model='user.x' max="400" />
                                </td>
                                <td>
                                    <input type='text' ng-model='user.y' />
                                    <input type='range' ng-model='user.y' max="300" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <p>
                        <button ng-click="addUser()">Add User</button>
                    </p>



                </div>
                <div class="span4">
                    <h2>d3.js + Angular</h2>

                    <p>These inputs are bound by Angular to properties of the d3.js circles</p>

                    <label>radius</label>
                    <input type="text" ng-model="circleProps.radius"/> 

                    <label>fill</label>
                    <input type="text" ng-model="circleProps.fill"/> 

                    <label>stroke</label>
                    <input type="text" ng-model="circleProps.stroke"/> 

                    <p>
                        <button ng-click="pulse()">pulse</button>
                    </p>

                    <pre>
{{circleProps | json}}
                    </pre>



                    <p>
                      Some code is adapted  from <a
                      href="http://mbostock.github.io/d3/tutorial/circle.html">d3
                      circles tutorial</a>.
                    </p>

                    <p> Another good guide is <a
                    href="http://briantford.com/blog/angular-d3.html">Brian
                    Ford's GitHub visualization exercise</a>, but it does fancy
                    stuff with Angular directives that we don't need to do yet.
                    </p>


                </div>
            </div>


            <!-- Example row of columns -->
            <div class="row">
                <div class="span8">
                    <div id="map"></div>
                </div>
                <div class="span4">
                    <h2>location title</h2>
                    <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
               </div>
            </div>

            <hr>

            <footer>
                <p>&copy; Geogossip 2013</p>
            </footer>

        </div> <!-- /container -->

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\/script>')</script>

        <script src="js/vendor/bootstrap.min.js"></script>

        <script src="js/config.js"></script>
        

        <script src="js/main.js"></script>
        <script src="js/chat.js"></script>
    </body>
</html>
